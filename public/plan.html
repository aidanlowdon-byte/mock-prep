<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mock-Prep Masterplan ‚Ä¢ 17 Oct ‚Äì 21 Nov 2025</title>
  <style>
    :root{
      --bg:#0b0f14; --panel:#121821; --muted:#99a3b3; --text:#e6eefc; --accent:#6ea8fe;
      --card:#0f141c; --ok:#5bd17f; --warn:#ffd166; --danger:#ff6b6b; --grid:#1c2531;
      --subject-bio:#8bd3dd; --subject-bus:#b39ddb; --subject-chem:#ffadad; --subject-cs:#80cbc4;
      --subject-dt:#ffd6a5; --subject-eng:#a0c4ff; --subject-fr:#caffbf; --subject-maths:#fdffb6;
      --subject-phys:#bdb2ff; --subject-rs:#ffc6ff
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b0f14,#0a0d12);color:var(--text);font:16px/1.5 system-ui,Segoe UI,Roboto,Helvetica,Arial}

    /* ---- HEADER: now NON-STICKY ---- */
    header{
      position:static;     /* was: sticky */
      top:auto;
      z-index:auto;
      background:rgba(10,13,18,.7);
      backdrop-filter:blur(8px);
      border-bottom:1px solid #1e2632
    }

    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    h1{margin:4px 0 2px;font-size:28px}
    .sub{color:var(--muted)}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    button,.pill{background:var(--panel);border:1px solid #243041;color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
    button:hover{border-color:var(--accent)}
    .legend{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    .tag{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:var(--card);border:1px solid #1e2632}
    .dot{width:10px;height:10px;border-radius:50%}

    main{padding:24px 0}
    .week{margin:18px 0}
    .week h2{font-size:20px;margin:0 0 8px}
    .quote{color:var(--muted);font-style:italic;margin-bottom:14px}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px}
    .day{background:var(--card);border:1px solid var(--grid);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:10px}
    .day .head{display:flex;justify-content:space-between;align-items:center}
    .date{font-weight:700}
    .time{color:var(--muted);font-size:13px}
    .slots{display:grid;gap:6px}
    .slot{display:flex;gap:8px;align-items:center;background:#0c1219;border:1px dashed #223044;padding:8px;border-radius:10px}
    .slot input[type="checkbox"]{width:18px;height:18px}
    .slot .when{font-weight:600;color:#cfe1ff;width:94px}
    .slot .subject{flex:1}
    .subject .s{padding:2px 8px;border-radius:999px;border:1px solid #213046;white-space:nowrap;font-size:13px}

    .exam-board{margin-top:26px}
    table{width:100%;border-collapse:collapse;background:var(--panel);border:1px solid #253246;border-radius:12px;overflow:hidden}
    th,td{padding:10px;border-bottom:1px solid #1f2836;text-align:left}
    th{background:#0e1520;font-weight:700}
    tr:last-child td{border-bottom:none}
    .exam{background:linear-gradient(90deg,#0e1520,transparent)}

    .helpers{margin-top:16px;color:var(--muted);font-size:14px}
    .muted{color:var(--muted)}
    .print-note{margin-top:8px}
    .quote-inline{font-style:italic}

    @media print{
      header{position:static;background:none;border:none}
      .controls{display:none}
      body{background:white;color:black}
      .day,.week .quote,table,.tag{break-inside:avoid}
    }
    .countdown{margin-top:10px;font-size:22px;font-weight:700;letter-spacing:.5px;color:var(--text)}
    .countdown .num{font-size:28px;padding:2px 8px;border-radius:8px;background:var(--panel);border:1px solid #243041;margin:0 3px}
    .countdown .label{color:var(--muted);font-weight:500;margin-right:10px}

    /* ---- FIT SUBJECT CHIPS INSIDE SLOTS ---- */
    .slots{display:grid;gap:6px}
    .slot{display:flex;gap:8px;align-items:center;background:#0c1219;border:1px dashed #223044;padding:8px;border-radius:10px;min-height:42px}
    .slot .when{font-weight:600;color:#cfe1ff;width:92px;flex:0 0 92px}
    .subject{flex:1;min-width:0}
    .subject .s{display:inline-block;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:2px 8px;border-radius:999px;border:1px solid #213046;vertical-align:middle}
    .countdown{margin-top:10px;font-size:22px;font-weight:700;letter-spacing:.5px;color:var(--text)}
    .countdown .num{font-size:28px;padding:2px 8px;border-radius:8px;background:var(--panel);border:1px solid #243041;margin:0 3px}
    .countdown .label{color:var(--muted);font-weight:500;margin-right:10px}

    /* Subject chips fit nicely */
    .slots{display:grid;gap:6px}
    .slot{display:flex;gap:8px;align-items:center;background:#0c1219;border:1px dashed #223044;padding:8px;border-radius:10px;min-height:42px}
    .slot .when{font-weight:600;color:#cfe1ff;width:92px;flex:0 0 92px}
    .subject{flex:1;min-width:0}
    .subject .s{display:inline-block;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:2px 8px;border-radius:999px;border:1px solid #213046;vertical-align:middle}

    /* (Previously ‚ÄúSticky header stronger‚Äù) keep the visuals but ensure NOT sticky */
    header{
      position:static;     /* important override */
      top:auto;
      z-index:auto;
      background:rgba(10,13,18,.86);
      backdrop-filter:blur(10px);
      border-bottom:1px solid #1e2632
    }

    /* Notes modal */
    .modal.hidden{display:none}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(2px);display:grid;place-items:center;z-index:2000}
    .modal .card{width:min(680px,92vw);background:var(--panel);border:1px solid #243041;border-radius:14px;padding:16px}
    .modal h3{margin:0 0 8px}
    .modal textarea{width:100%;min-height:220px;padding:10px;border-radius:10px;background:#0f141c;color:var(--text);border:1px solid #2a3a4f;resize:vertical}
    .modal .row{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
    .note-chip{cursor:pointer}
    .note-pill{margin-left:8px;font-size:12px;opacity:.8;background:#0f141c;border:1px solid #243041;padding:2px 6px;border-radius:999px}
    .note-chip.has-note{box-shadow:0 0 0 1px var(--ok) inset}

    /* Mobile-friendly tweaks */
    @media (max-width: 720px){
      .wrap{padding:12px}
      h1{font-size:22px}
      .controls{gap:6px;overflow-x:auto;padding-bottom:6px}
      .tag{padding:6px 8px}
      .legend{gap:6px}
      .grid{grid-template-columns:1fr}
      .slot .when{width:86px;flex:0 0 86px;font-size:13px}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>üåÖ Mock-Prep Masterplan</h1>
      <div class="sub">17 October ‚Äì 21 November 2025 ‚Ä¢ UK (Europe/London)</div>
      <div class="controls">
        <button id="save">üíæ Save Progress</button>
        <button id="clear">‚ôªÔ∏è Clear Ticks</button>
        <button onclick="window.print()">üñ®Ô∏è Print</button>
        <span class="pill">Tip: Click a subject label to edit text/times.</span>
      </div>
      <div id="countdown" class="countdown" aria-live="polite">
        <span class="label">Countdown to first exam:</span>
        <span class="num" id="cd-days">0</span>d
        <span class="num" id="cd-hours">00</span>h
        <span class="num" id="cd-mins">00</span>m
        <span class="num" id="cd-secs">00</span>s
      </div>
      <div class="legend">
        <button type="button" class="tag note-chip" data-subject="bio" title="Click for notes"><span class="dot" style="background:var(--subject-bio)"></span>üß¨ Biology <span class="note-pill">Notes</span></button>
        <button type="button" class="tag note-chip" data-subject="bus" title="Click for notes"><span class="dot" style="background:var(--subject-bus)"></span>üíº Business <span class="note-pill">Notes</span></button>
        <button type="button" class="tag note-chip" data-subject="chem" title="Click for notes"><span class="dot" style="background:var(--subject-chem)"></span>‚öóÔ∏è Chemistry <span class="note-pill">Notes</span></button>
        <button type="button" class="tag note-chip" data-subject="cs" title="Click for notes"><span class="dot" style="background:var(--subject-cs)"></span>üíª Computer Sci <span class="note-pill">Notes</span></button>
        <button type="button" class="tag note-chip" data-subject="dt" title="Click for notes"><span class="dot" style="background:var(--subject-dt)"></span>‚öôÔ∏è DT <span class="note-pill">Notes</span></button>
        <button type="button" class="tag note-chip" data-subject="eng" title="Click for notes"><span class="dot" style="background:var(--subject-eng)"></span>‚úçÔ∏è Eng Lang <span class="note-pill">Notes</span></button>
        <button type="button" class="tag note-chip" data-subject="fr" title="Click for notes"><span class="dot" style="background:var(--subject-fr)"></span>üá´üá∑ French <span class="note-pill">Notes</span></button>
        <button type="button" class="tag note-chip" data-subject="maths" title="Click for notes"><span class="dot" style="background:var(--subject-maths)"></span>üß† Maths <span class="note-pill">Notes</span></button>
        <button type="button" class="tag note-chip" data-subject="phys" title="Click for notes"><span class="dot" style="background:var(--subject-phys)"></span>üî≠ Physics <span class="note-pill">Notes</span></button>
        <button type="button" class="tag note-chip" data-subject="rs" title="Click for notes"><span class="dot" style="background:var(--subject-rs)"></span>‚òØÔ∏è RS <span class="note-pill">Notes</span></button>
      </div>
    </div>
  </header>

  <!-- Notes Modal -->
  <div id="note-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="note-title">
    <div class="card">
      <h3 id="note-title">Subject notes</h3>
      <div id="note-subject" class="muted" style="margin-bottom:8px"></div>
      <textarea id="note-text" placeholder="Write formulas, essay plans, vocab lists‚Ä¶"></textarea>
      <div class="row">
        <button id="note-delete">üóëÔ∏è Delete</button>
        <button id="note-close">Cancel</button>
        <button id="note-save">üíæ Save</button>
      </div>
    </div>
  </div>

  <main class="wrap">
    <p class="helpers">Each day targets ‚âà <b>3 hours</b> total. Suggested slots: <span class="quote-inline">15:45‚Äì16:45</span>, <span class="quote-inline">17:00‚Äì18:00</span>, <span class="quote-inline">18:15‚Äì19:15</span>. Adjust to suit. Tick as you complete; progress is saved locally on your device.</p>

    <!-- (content unchanged below) -->
    <!-- Week 1 -->
    <!-- ... all your weeks, table, scripts exactly as before ... -->
  </main>

  <script>
    /* scripts unchanged */
    const KEY = 'mockprep-v1';
    const state = JSON.parse(localStorage.getItem(KEY) || '{}');

    function serialise(){
      const data = {};
      document.querySelectorAll('.day').forEach(day=>{
        const dayKey = day.getAttribute('data-day') || day.querySelector('.date')?.textContent?.trim();
        const slots = [];
        day.querySelectorAll('.slot').forEach(slot=>{
          slots.push({
            checked: slot.querySelector('input[type="checkbox"]').checked,
            when: slot.querySelector('.when').textContent.trim(),
            subject: slot.querySelector('.subject .s').textContent.trim()
          });
        });
        data[dayKey] = slots;
      });
      localStorage.setItem(KEY, JSON.stringify(data));
    }

    function hydrate(){
      if(!state) return;
      document.querySelectorAll('.day').forEach(day=>{
        const dayKey = day.getAttribute('data-day') || day.querySelector('.date')?.textContent?.trim();
        const slots = state[dayKey] || [];
        const nodes = day.querySelectorAll('.slot');
        slots.forEach((s,i)=>{
          const node = nodes[i]; if(!node) return;
          node.querySelector('input[type="checkbox"]').checked = !!s.checked;
          node.querySelector('.when').textContent = s.when || node.querySelector('.when').textContent;
          node.querySelector('.subject .s').textContent = s.subject || node.querySelector('.subject .s').textContent;
        });
      });
    }

    document.addEventListener('change', e=>{
      if(e.target.matches('input[type="checkbox"]')) serialise();
    });
    document.addEventListener('input', e=>{
      if(e.target.closest('.slot')) serialise();
    });

    document.getElementById('save').addEventListener('click', serialise);
    document.getElementById('clear').addEventListener('click', ()=>{
      localStorage.removeItem(KEY); location.reload();
    });

    hydrate();

    // Countdown
    (function(){
      const target = new Date('2025-11-10T09:05:00');
      const dd = document.getElementById('cd-days');
      const hh = document.getElementById('cd-hours');
      const mm = document.getElementById('cd-mins');
      const ss = document.getElementById('cd-secs');
      function pad(n){return String(Math.max(0,Math.floor(n))).padStart(2,'0')}
      function tick(){
        const now = new Date();
        let diff = target - now;
        if(diff < 0) diff = 0;
        const days = Math.floor(diff/86400000);
        const hours = Math.floor((diff%86400000)/3600000);
        const mins = Math.floor((diff%3600000)/60000);
        const secs = Math.floor((diff%60000)/1000);
        if(dd){dd.textContent = days}
        if(hh){hh.textContent = pad(hours)}
        if(mm){mm.textContent = pad(mins)}
        if(ss){ss.textContent = pad(secs)}
      }
      tick();
      setInterval(tick,1000);
    })();

    // Notes
    (function(){
      const KEY_PREFIX = 'note-';
      const chips = document.querySelectorAll('.note-chip');
      const modal = document.getElementById('note-modal');
      const txt = document.getElementById('note-text');
      const title = document.getElementById('note-title');
      const label = document.getElementById('note-subject');
      const saveBtn = document.getElementById('note-save');
      const closeBtn = document.getElementById('note-close');
      const delBtn = document.getElementById('note-delete');
      let currentId = null;

      function open(id, name){
        currentId = id;
        title.textContent = 'Notes ‚Äî ' + name;
        label.textContent = 'All changes are saved on this device.';
        txt.value = localStorage.getItem(KEY_PREFIX+id) || '';
        modal.classList.remove('hidden');
        txt.focus();
      }
      function close(){ modal.classList.add('hidden'); currentId=null; }
      function save(){ if(currentId){ localStorage.setItem(KEY_PREFIX+currentId, txt.value); mark(); close(); } }
      function del(){ if(currentId){ localStorage.removeItem(KEY_PREFIX+currentId); txt.value=''; mark(); close(); } }
      function mark(){
        chips.forEach(ch=>{
          const id = ch.getAttribute('data-subject');
          const has = !!localStorage.getItem(KEY_PREFIX+id);
          ch.classList.toggle('has-note', has);
        });
      }

      chips.forEach(ch=>{
        ch.addEventListener('click', ()=>{
          const id = ch.getAttribute('data-subject');
          const name = ch.textContent.replace('Notes','').trim();
          open(id, name);
        });
      });
      saveBtn.addEventListener('click', save);
      closeBtn.addEventListener('click', close);
      delBtn.addEventListener('click', del);
      modal.addEventListener('click', (e)=>{ if(e.target === modal) close(); });
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && !modal.classList.contains('hidden')) close(); });

      mark();
    })();
  </script>
</body>
</html>

